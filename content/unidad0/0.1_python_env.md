# 0.1 Configuraci√≥n del Entorno de Desarrollo Python

## 1. Introducci√≥n al Ecosistema

El primer paso para convertirse en un desarrollador profesional de Python (o "Pythonista") no es aprender sintaxis, sino dominar el entorno. A diferencia de lenguajes compilados monol√≠ticos como Java (donde instalas el JDK y NetBeans/IntelliJ y "listo"), el ecosistema de Python es modular, flexible y, a veces, ca√≥tico si no se gestiona correctamente.

En esta secci√≥n, configuraremos un entorno de desarrollo de clase mundial, capaz de escalar desde scripts simples hasta sistemas de Inteligencia Artificial complejos. Cubriremos la instalaci√≥n en los tres sistemas operativos principales, la configuraci√≥n profunda de VS Code, y las herramientas de l√≠nea de comandos indispensables.

### 1.1 ¬øPor qu√© la configuraci√≥n importa?
Un error com√∫n en estudiantes es usar el Python que viene instalado por defecto en el sistema operativo, o instalar Anaconda sin entender qu√© hace, y luego luchar durante meses con errores como `ModuleNotFoundError` o conflictos de versiones.
Una configuraci√≥n profesional te da:
*   **Reproducibilidad:** Tu c√≥digo funciona igual en tu laptop y en el servidor.
*   **Aislamiento:** Proyecto A no rompe a Proyecto B.
*   **Productividad:** El IDE trabaja para ti, encontrando errores antes de ejecutar.

---

## 2. El Int√©rprete: Python 3.10+

### 2.1 Historia y Versiones
La historia de Python se divide en dos eras: Python 2 (Legacy) y Python 3 (Modern).
*   **Python 2:** Muri√≥ oficialmente el 1 de enero de 2020. Ten√≠a problemas de dise√±o con Unicode (strings vs bytes) y divisi√≥n de enteros.
*   **Python 3:** Incompatible hacia atr√°s, pero corrige los errores fundamentales. Todo desarrollo nuevo **debe** hacerse en Python 3.

Para la materia de **T√≥picos Avanzados**, necesitamos m√≠nimo **Python 3.10** debido a caracter√≠sticas cr√≠ticas:
*   **3.10:** Pattern Matching (`match/case`), similar al switch de otros lenguajes.
*   **3.11:** Mejoras masivas de velocidad (hasta 60% m√°s r√°pido) y mensajes de error mucho m√°s claros.
*   **3.12:** Mejoras en f-strings y limpieza interna (adi√≥s `distutils`).

### 2.2 Instalaci√≥n Profesional

#### A. En macOS (Homebrew)
**ADVERTENCIA:** macOS trae una versi√≥n de Python instalada en `/usr/bin/python3`. Es utilizada por el sistema operativo. **NUNCA** instales paquetes ah√≠ ni intentes actualizarla. Si rompes ese Python, rompes macOS.

La forma correcta es usar **Homebrew**, el gestor de paquetes de facto para Mac.

1.  **Instalar Homebrew** (si no lo tienes):
    Abre la terminal y pega:
    ```bash
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    ```

2.  **Instalar Python 3 actualizado:**
    ```bash
    brew install python
    ```

3.  **Verificar la ruta:**
    ```bash
    which python3
    # Debe decir: /opt/homebrew/bin/python3 (Silicon) o /usr/local/bin/python3 (Intel)
    # NO debe decir: /usr/bin/python3
    ```

#### B. En Windows (Winget / Store)
Hist√≥ricamente, instalar Python en Windows era doloroso (variables de entorno PATH manuales). Hoy es trivial.

**Opci√≥n 1: Winget (Moderno)**
Abre PowerShell y escribe:
```powershell
winget search Python.Python.3
winget install Python.Python.3.12
```

**Opci√≥n 2: Instalador Oficial**
1.  Descarga desde python.org.
2.  Al ejecutar, marca la casilla cr√≠tica: **"Add Python to PATH"**.
3.  Marca "Disable path length limit" al final.

**Verificaci√≥n:**
Abre una **nueva** terminal (PowerShell o CMD) y escribe `python --version`. Si sale error, es que no marcaste "Add to PATH".

#### C. En Linux (APT/DNF)
Linux es el hogar nativo de Python.
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3 python3-venv python3-pip

# Fedora
sudo dnf install python3
```

---

## 3. El Editor: Visual Studio Code (VS Code)

Aunque PyCharm es un IDE excelente (y poderoso), **VS Code** se ha convertido en el est√°ndar de la industria (74% de uso seg√∫n StackOverflow 2024) por su ligereza y extensibilidad.

### 3.1 Instalaci√≥n
Descarga desde [code.visualstudio.com](https://code.visualstudio.com/).
En Mac, aseg√∫rate de instalar el comando `code` en el PATH (Command Palette -> "Shell Command: Install 'code' command in PATH").

### 3.2 Por qu√© VS Code para Python
VS Code no es "solo un editor de texto". Con las extensiones correctas, es un IDE completo.
1.  **LSP (Language Server Protocol):** A trav√©s de Pylance, VS Code "entiende" tu c√≥digo mejor que t√∫ mismo. Sabe qu√© tipo de dato retorna una funci√≥n externa sin tener que abrir el c√≥digo fuente.
2.  **Debugging Integrado:** Puedes poner breakpoints, inspeccionar variables y navegar el stack de llamadas sin salir del editor.
3.  **Terminal Integrada:** Vital para ejecutar scripts y gestionar entornos virtuales (`Ctrl + √±` o `Ctrl + ` `).
4.  **Remote Development:** Puedes programar en tu laptop mientras el c√≥digo corre en un contenedor Docker, en WSL2 o en un servidor AWS v√≠a SSH.

### 3.3 Extensiones Esenciales

Para trabajar en este curso, necesitas instalar el ecosistema de Python.

#### Nivel 1: Obligatorias
El "Python Extension Pack" oficial de Microsoft incluye todo esto:

1.  **Python (ms-python.python):** El n√∫cleo. Gestiona int√©rpretes, debugging y refactoring.
2.  **Pylance (ms-python.vscode-pylance):** El cerebro. Provee autocompletado inteligente (IntelliSense), an√°lisis de tipos est√°ticos y navegaci√≥n de c√≥digo.
3.  **Jupyter (ms-toolsai.jupyter):** Permite ejecutar "Notebooks" (`.ipynb`) directamente en VS Code. Vital para la Unidad 4 (Ciencia de Datos).

#### Nivel 2: Calidad de C√≥digo (Linters/Formatters)
Hablaremos m√°s de esto en 0.4, pero inst√°lalas ya.

1.  **Black Formatter:** El formateador sin compromisos. Convierte tu c√≥digo espagueti en c√≥digo PEP 8 perfecto al guardar.
2.  **isort:** Ordena tus `imports` alfab√©ticamente y por tipo.
3.  **Flake8:** Busca errores l√≥gicos y de estilo.

#### Nivel 3: Productividad
1.  **Error Lens:** Muestra los errores (l√≠neas rojas) y advertencias directamente a la derecha de la l√≠nea de c√≥digo, no solo en la pesta√±a de problemas.
2.  **GitLens:** Muestra qui√©n modific√≥ cada l√≠nea de c√≥digo y cu√°ndo ("Git Blame" en esteroides).
3.  **Material Icon Theme:** Hace que la estructura de carpetas sea legible visualmente.

---

## 4. Configuraci√≥n del Workspace (JSON)

VS Code permite configurar el editor a nivel de usuario (global) o a nivel de proyecto (workspace).
La pr√°ctica profesional es configurar el proyecto mediante una carpeta oculta `.vscode`. Esto asegura que todos los desarrolladores del equipo (o t√∫ en diferentes PCs) tengan la misma configuraci√≥n exacta.

Crea un archivo `.vscode/settings.json` en la ra√≠z de tu proyecto `top-avanz-prog-tecnm`:

```json
{
  // 1. Configuraci√≥n del Int√©rprete
  // Fuerza a VS Code a usar el entorno virtual local, no el global
  "python.defaultInterpreterPath": ".venv/bin/python",
  
  // 2. Formateo Autom√°tico
  "editor.formatOnSave": true,
  "python.formatting.provider": "none", // Desactiva el legacy
  "[python]": {
    "editor.defaultFormatter": "ms-python.black-formatter",
    "editor.codeActionsOnSave": {
        "source.organizeImports": true // isort autom√°tico
    }
  },
  
  // 3. An√°lisis Est√°tico (Type Checking)
  // "off", "basic", "strict". Basic es el punto dulce.
  "python.analysis.typeCheckingMode": "basic",
  
  // 4. Limpieza visual
  "files.exclude": {
    "**/__pycache__": true,
    "**/.venv": true,
    "**/.pytest_cache": true
  },
  
  // 5. Configuraci√≥n de Pylance
  "python.analysis.inlayHints.functionReturnTypes": true,
  "python.analysis.inlayHints.variableTypes": false
}
```

### An√°lisis detallado de settings.json

*   `"python.defaultInterpreterPath"`: Este es el santo grial para evitar "Module Not Found". Le dice expl√≠citamente a VS Code: "No busques pandas en el sistema, b√∫scalo en la carpeta `.venv` de este proyecto".
*   `"editor.formatOnSave"`: Ahorra horas de vida. Escribes c√≥digo feo, presionas Ctrl+S, y puf, se arregla.
*   `"python.analysis.typeCheckingMode": "basic"`: Pylance actuar√° como un compilador estricto. Si intentas pasar un String a una funci√≥n que espera un Integer, te subrayar√° en rojo **antes** de que corras el c√≥digo.

---

## 5. La Terminal (Shell)

Como desarrollador avanzado, pasar√°s el 50% de tu tiempo en la terminal.
Debes perderle el miedo. La GUI es buena para editar texto, pero la terminal es buena para operar el sistema.

### 5.1 Shells Modernas
*   **Windows:** Usa **PowerShell 7** (no el 5 antiguo) o, mejor a√∫n, **WSL2** (Windows Subsystem for Linux) si quieres un entorno Linux real dentro de Windows.
*   **Mac:** Usa **Zsh** (default).
*   **Linux:** Bash o Zsh.

### 5.2 Comandos de Supervivencia

| Comando | Acci√≥n | Ejemplo | Notas |
| :--- | :--- | :--- | :--- |
| `cd` | Cambiar directorio | `cd src/gui` | `cd ..` sube un nivel. `cd` solo va a Home. |
| `ls` | Listar archivos | `ls -la` | `-l` lista detalles, `-a` muestra ocultos (.venv). En Win usa `dir`. |
| `mkdir` | Crear carpeta | `mkdir -p a/b/c` | `-p` crea toda la ruta anidada si no existe. |
| `touch` | Crear archivo | `touch main.py` | En Windows Powershell: `New-Item main.py`. |
| `rm` | Borrar | `rm -rf carpeta` | **PELIGRO**. `-r` recursivo, `-f` forzado. No hay papelera de reciclaje. |
| `cp` | Copiar | `cp origen destino` | `cp -r` para carpetas. |
| `mv` | Mover/Renombrar | `mv viejo.py nuevo.py` | |

### 5.3 Enchulando la Terminal (Prompt)
Saber en qu√© rama de git est√°s y en qu√© entorno virtual est√°s es vital.
Se recomienda instalar:
*   **Oh My Zsh** (Mac/Linux)
*   **Oh My Posh** (Windows)
*   **Starship.rs** (Cross-platform, muy r√°pido)

Estos prompts te muestran:
`~/proyecto on ÓÇ† main via üêç 3.10 (.venv) took 2s`

---

## 6. El REPL de Python (Read-Eval-Print Loop)

Python es interpretado, lo que significa que puedes conversar con √©l.
Si escribes `python` (o `python3`) en la terminal, entras al modo interactivo.

### 6.1 Usos del REPL
El REPL no es para escribir programas enteros. Es para:
1.  **Experimentar:** "¬øC√≥mo funcionaba `slice` en strings?"
2.  **Verificar instalaci√≥n:** `import sqlalchemy`. Si no da error, est√° instalado.
3.  **Calculadora r√°pida:** `250 * 1.16`.
4.  **Help:** `help(str)`.

### 6.2 Trucos del Ninja del REPL
1.  **Guion bajo `_`:** Contiene el resultado de la √∫ltima operaci√≥n.
    ```python
    >>> 10 + 20
    30
    >>> _ * 2
    60
    ```
2.  **`dir(objeto)`:** Introspecci√≥n. Muestra todos los m√©todos y atributos de un objeto.
    ```python
    >>> s = "hola"
    >>> dir(s)
    ['__add__', ..., 'upper', 'zfill']
    ```
3.  **`type(objeto)`:** Te dice qu√© es.
    ```python
    >>> type(s)
    <class 'str'>
    ```

### 6.3 IPython (Interactive Python)
El REPL por defecto es feo (monocrom√°tico, sin autocompletado).
En producci√≥n usamos **IPython**.
```bash
pip install ipython
ipython
```
Ofrece:
*   Colores.
*   Autocompletado con Tab.
*   `%timeit comando`: Mide el rendimiento de una l√≠nea de c√≥digo ejecut√°ndola mil veces.
*   `?objeto`: Muestra la documentaci√≥n inline.
*   `??objeto`: Muestra el **c√≥digo fuente** del objeto (si es Python puro).

---

## 7. Anatom√≠a de un Script Python Profesional

Un archivo `.py` no es un bloc de notas desordenado. Tiene una estructura est√°ndar.

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
Gestor de Usuarios - M√≥dulo Principal

Este m√≥dulo provee la funcionalidad para crear, listar y eliminar usuarios
del sistema. Utiliza SQLAlchemy para persistencia y Pydantic para validaci√≥n.

Uso t√≠pico:
    python main.py --crear "Juan Perez"

Author: Jes√∫s Olvera
Date: 2026-01-30
License: MIT
"""

# ==========================================
# 1. Imports
# ==========================================

# A. Standard Library (Siempre van primero, alfab√©ticamente)
import argparse
import logging
import os
import sys
from typing import List, Optional

# B. Third-Party Imports (Librer√≠as externas)
import requests
from dotenv import load_dotenv

# C. Local Application Imports (Nuestros m√≥dulos)
# Usando import absoluto (Unit 2.1)
from src.core.models import User
from src.utils.helpers import validate_email

# ==========================================
# 2. Constantes Globales (Metadatos)
# ==========================================
__version__ = "1.0.2"
__author__ = "Jes√∫s Olvera"

# Constantes en UPPER_CASE
DEFAULT_TIMEOUT = 30
API_URL = os.getenv("API_URL", "https://api.tecnm.mx/v1")

# ==========================================
# 3. Configuraci√≥n de Logging
# ==========================================
logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s"
)
logger = logging.getLogger(__name__)

# ==========================================
# 4. Definici√≥n de Clases y Funciones
# ==========================================

class UserManager:
    """Clase controladora para operaciones de usuario."""
    
    def __init__(self, db_connection: str):
        """Inicializa el manager con una conexi√≥n a BD."""
        self.conn = db_connection
        logger.info("UserManager inicializado")

    def get_user(self, user_id: int) -> Optional[User]:
        """Busca un usuario por ID. Retorna None si no existe."""
        # L√≥gica aqu√≠...
        pass

def main():
    """Funci√≥n principal (Entry Point)."""
    # Parseo de argumentos de l√≠nea de comandos
    parser = argparse.ArgumentParser(description="Herramienta CLI de Usuarios")
    parser.add_argument("--id", type=int, help="ID del usuario a buscar")
    args = parser.parse_args()

    if args.id:
        mgr = UserManager("sqlite:///")
        user = mgr.get_user(args.id)
        if user:
            print(f"Usuario encontrado: {user}")
        else:
            logger.warning(f"Usuario {args.id} no encontrado")

# ==========================================
# 5. Guardi√°n de Ejecuci√≥n
# ==========================================
if __name__ == "__main__":
    # Este bloque solo se ejecuta si corres el script directamente.
    # NO se ejecuta si importas este archivo como m√≥dulo.
    try:
        main()
    except KeyboardInterrupt:
        # Manejo elegante de Ctrl+C
        print("\nOperaci√≥n cancelada por el usuario.")
        sys.exit(0)
    except Exception as e:
        # Captura cualquier error no controlado para loguearlo antes de morir
        logger.exception("Error fatal inesperado")
        sys.exit(1)
```

### An√°lisis del Template
1.  **Shebang:** `#!/usr/bin/env python3`. En Linux/Mac, permite ejecutar `./script.py` sin escribir `python`.
2.  **Docstring del M√≥dulo:** Explica qu√© hace el archivo. Es lo que ves si haces `import script; help(script)`.
3.  **Imports Ordenados:** Sigue PEP 8.
4.  **Constantes:** Arriba, centralizadas, f√°ciles de cambiar. Uso de `os.getenv` para configuraci√≥n (veremos esto en 12-Factor App).
5.  **Logging:** Nunca uses `print` para depurar en producci√≥n.
6.  **Type Hints:** `-> Optional[User]`. Clave para c√≥digo mantenible.
7.  **`if __name__ == "__main__":`**: La l√≠nea m√°s importante de Python. Permite que el c√≥digo sea reusable (importable) y ejecutable a la vez.

---

## 8. Resumen y Checklist

Antes de avanzar a crear Entornos Virtuales, verifica que tienes:

- [ ] Python 3.10, 3.11 o 3.12 instalado y accesible en terminal (`python --version`).
- [ ] VS Code instalado con el "Python Extension Pack".
- [ ] La carpeta `.vscode` creada en tu proyecto con el `settings.json` recomendado.
- [ ] Una terminal moderna (PowerShell 7, Zsh) configurada.
- [ ] Entendimiento de c√≥mo usar el REPL para pruebas r√°pidas.

Si tienes todo esto, tu base es s√≥lida como una roca. Est√°s listo para dejar atr√°s los problemas de instalaci√≥n y enfocarte en la arquitectura.


---

## 9. Modern CLI: M√°s all√° del print()

La terminal no tiene por qu√© ser aburrida.
En 2024, las herramientas de l√≠nea de comandos (CLI) compiten en UX con las interfaces gr√°ficas.

### Librer√≠as para "Enchular" la Terminal
1.  **Rich:**
    Permite imprimir tablas, markdown, sintaxis coloreada y barras de progreso.
    *   *Uso:* Diagn√≥sticos, logs legibles.
2.  **Typer (basado en Click):**
    El framework moderno para crear CLIs. Usas Type Hints para definir argumentos.
    ```python
    def main(nombre: str, edad: int = 18):
        ...
    # Genera autom√°ticamente --help, validaci√≥n de tipos, etc.
    ```

### Laboratorio: Dashboard de Diagn√≥stico
Hemos creado un script que utiliza `rich` para mostrar el estado de tu sistema.
Ve a la carpeta `codigos/` y ejecuta `python 01_rich_diagnostics.py`.

<div align="center">

[‚¨ÖÔ∏è Anterior: Men√∫ Unidad](README.md) &nbsp;&nbsp;|&nbsp;&nbsp; [Siguiente: 0.2 Entornos Virtuales](0.2_virtual_envs.md) ‚û°Ô∏è

</div>
